<div class="card card-tabbed overflow-visible inspectable border-0">
  <div class="card-header text-center flex-column py-2" style="min-height: 0rem;">
    <h5><%= post.title %></h5>
    <div>
      <% post.tags.each do |tag| %>
        <a href="<%= tag_path(tag) %>" class="badge badge-info" title="<%= tag.title %>">#<%= tag.title %></a>
      <% end %>
    </div>
    <div class="my-2">
      <% if post.file.attached? %>
        <a href="<%= rails_blob_path(post.file, disposition: "attachment") %>" class="btn btn-circle btn-icon btn-border-2x btn-outline-dark mr-2" style="padding-top: 0.5rem; height: 2.375rem; width: 2.375rem;"><i class="ti-download"></i></a><%= post.file.filename %>
      <% else %>
        <p>Il n'y a aucun fichier attaché</p>
      <% end %>
    </div>
  </div>
  <div class="card-body pb-0 pt-3">
    <ul class="list-group list-group-flush">
      <li class="list-group-item d-flex pb-0 px-0">
        <div class="mr-auto d-flex align-items-center">
          <% if post.user.avatar.attached? %>
            <%= link_to image_tag(post.user.avatar, class: "rounded-circle border border-primary mr-1", width: '64', height: '64', alt: 'profile picture'), posts_user_path(post.user) %>
          <% else %>
            <%= link_to image_tag('fallback/default', class: "rounded-circle border border-primary mr-1", width: '64', height: '64', alt: 'profile picture'), posts_user_path(post.user) %>
          <% end %>
          <div class="mr-auto d-flex flex-column">
            <h6 class="mb-0"><%= link_to "#{post.user.first_name} #{post.user.last_name}", posts_user_path(post.user) %></h6>
            <small>
              <time>Il y a <%= time_ago_in_words(post.created_at) %></time>
            </small>
          </div>
        </div>
      </li>
      <li class="list-group-item d-flex pt-0 px-0 border-top-0 border-bottom">
        <p class="mt-1 mb-1 text-break pb-3"><%= post.description %></p>
      </li>
    </ul>
  </div>
  <div class="card-header py-1 border-0 justify-content-around" style="min-height: 0rem;">
    <ul class="nav nav-pills nav-pills-round nav-pills-warning my-1">
      <li class="nav-item d-flex flex-row align-items-center mr-3">
        <%= link_to fa_icon_tag("arrow-up"), like_post_path(post), remote: true, id: "like_post_#{post.id}", class: "nav-link mr-1" %> • <%= post.get_likes.size %>
      </li>
      <li class="nav-item d-flex flex-row align-items-center mr-3">
        <%= link_to fa_icon_tag("arrow-down"), dislike_post_path(post), remote: true, id: "dislike_post_#{post.id}", class: "nav-link mr-1" %> • <%= post.get_dislikes.size %>
      </li>
      <li class="nav-item d-flex flex-row align-items-center mr-3">
        <%= link_to fa_icon_tag("comment"), new_post_comment_path(post), remote: true, class: 'nav-link mr-1', id: "new-comment" %> • <%= post.comments.count %>
      </li>
      <li class="nav-item">
        <%= link_to fa_icon_tag("eye"), post_path(post), class: 'nav-link' %>
      </li>
      <% if current_user == post.user %>
        <li class="nav-item">
          <%= link_to fa_icon_tag("pencil"), edit_post_path(post), class: 'nav-link' %>
        </li>
        <li class="nav-item">
          <%= link_to fa_icon_tag("trash"), post, data: { confirm: 'Êtes-vous sûr ?' }, method: :delete, class: 'nav-link', remote: true %>
        </li>
      <% end %>
    </ul>
  </div>
  <div class="card-footer d-flex flex-row pt-0" style="background-color: #fff">
    <div class="new-comment d-flex flex-row w-100">
      <%= image_tag(current_user.avatar, class: "rounded-circle border border-primary mr-1", width: '40', height: '40', alt: 'profile picture') %>
      <%= render partial: 'comments/form', locals: { post: post } %>
    </div>
  </div>
  <div class="card-body pb-2 pt-0">
    <ul class="list-group list-group-flush" id="#comments">
      <%= render partial: 'comments/comment', locals: { post: post } %>
    </ul>
  </div>
