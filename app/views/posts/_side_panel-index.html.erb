<div id="sidebar" class="col-lg-3 col-md-9 order-md-2 order-sm-1">
  <div class="card card-tabbed">
    <div class="card-header d-flex justify-content-center">
      <h6>Classement</h6>
      <ul class="nav nav-tabs nav-tabs-primary card-header-tabs">
        <li class="nav-item">
          <a class="nav-link" href="#today" data-toggle="tab">
            Aujourd'hui
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#week" data-toggle="tab">
            Semaine
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#month" data-toggle="tab">
            Mois
          </a>
        </li>
      </ul>
    </div>
    <div class="table-responsive tab-content" id="tabs">
      <table class="table table-hover table-striped tab-pane" id="today">
        <thead>
          <tr>
            <th>
              Nom
            </th>
            <th>
              Points
            </th>
          </tr>
        </thead>
        <tbody>
          <%= Merit::Score.top_scored.map do |top_score_hash| %>
            <tr>
              <td>
                <%= link_to image_tag(user_avatar(User.find(top_score_hash["user_id"])), class: 'avatar rounded-circle', style: 'object-fit: cover;', width: '34', height: '34', alt: 'profile picture'), posts_user_path(User.find(top_score_hash["user_id"])) %>
                <%= link_to "#{User.find(top_score_hash["user_id"]).full_name}", posts_user_path(User.find(top_score_hash["user_id"])) %>
              </td>
              <td class="font-weight-bold">
                <%= top_score_hash["sum_points"].to_s %>
              <% end.to_sentence %>
            </td>
          </tr>
        </tbody>
      </table>
      <table class="table table-hover table-striped tab-pane" id="week">
        <thead>
          <tr>
            <th>
              Nom
            </th>
            <th>
              Points
            </th>
          </tr>
        </thead>
        <tbody>
          <%= Merit::Score.top_scored.map do |top_score_hash| %>
            <tr>
              <td>
                <%= link_to image_tag(user_avatar(User.find(top_score_hash["user_id"])), class: 'avatar rounded-circle', style: 'object-fit: cover;', width: '34', height: '34', alt: 'profile picture'), posts_user_path(User.find(top_score_hash["user_id"])) %>
                <%= link_to "#{User.find(top_score_hash["user_id"]).full_name}", posts_user_path(User.find(top_score_hash["user_id"])) %>
              </td>
              <td class="font-weight-bold">
                <%= top_score_hash["sum_points"].to_s %>
              <% end.to_sentence %>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <script>
    function activateTab(tab){
        $('.nav-tabs a[href="#' + tab + '"]').tab('show');
    };
    
    activateTab('today');
  </script>
