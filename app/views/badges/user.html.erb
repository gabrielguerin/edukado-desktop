<% if current_user == @user %>
  <% @title = "Vos badges" %>
<% else %>
  <% @title = "Badges obtenus par #{@user.first_name}" %>
<% end %>
<div class="container">
  <div class="row">
    <div class="col-md-9">
      <% if @user.badges.present? %>
        <div class="card">
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-sm-responsive">
                <thead>
                  <tr>
                    <th>Badge</th>
                    <th>Description</th>
                    <th>Date</th>
                  </tr>
                </thead>
                <tbody>
                  <% @user.sash.badges_sashes.each do |badge_sash| %>
                    <tr>
                      <td>
                        <%= render partial: 'badge', locals: { badge: badge_sash.badge } %>
                      </td>
                      <td>
                        <%= badge_sash.badge.description %>
                      </td>
                      <td>
                        Obtenu le <%= I18n.localize((badge_sash.created_at), format: "%-d %B %Y") %>
                      </td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      <% else %>
        <% if current_user == @user %>
          <div class="card">
            <div class="card-body text-center">
              <p>Vous n'avez pas encore obtenu de badges.</p>
            </div>
          </div>
        <% else %>
          <div class="card">
            <div class="card-body text-center">
              <p><%= @user.first_name %> n'a pas encore obtenu de badges.</p>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
    <div id="sidebar" class="col-lg-3 col-md-4 order-md-2 order-sm-1">
      <%= render partial: 'users/side_panel' %>
    </div>
  </div>
</div>
