<% @title = 'Modifier mon profil' %>
<%= content_for :js_libs, "modernizr jasny" %>
<%= render partial: 'users/profile-header' %>
<div class="col-12 col-md-8 mr-auto ml-auto">
  <div class="card">
    <div class="card-body">
      <h5 class="mb-4">PROFIL</h5>
      <div class="container">
        <%= form_for resource, as: resource_name, url: registration_path(resource_name),
                html: { method: :put, novalidate: true, multipart: true, class: "form-horizontal" } do |f| %>
          <%= f.error_notification %>
          <%= f.form_group :avatar, class: "row" do |f| %>
            <div class="col-sm-4 col-form-label checkbox">
              <%= f.check_box :remove_avatar %>
              <%= f.label :remove_avatar, "Supprimer la photo de profil" %>
            </div>
            <div class="col-md-8">
              <%= f.label "Photo de profil", class: "custom-file-label" %>
              <%= f.file_field :avatar, class: "custom-file-input" %>
              <%= f.hidden_field :avatar_cache %>
              <%= f.error_messages %>
            </div>
            <script type="application/javascript">
              $('input[type="file"]').change(function(e){
                  var fileName = e.target.files[0].name;
                  $('.custom-file-label').html(fileName);
              });
            </script>
          <% end %>
          <%= f.form_group :first_name, class: "row" do |f| %>
            <%= f.label "Prénom", class: "col-sm-4 col-form-label" %>
            <div class="col-md-8">
              <%= f.text_field :first_name, autofocus: true, class: "form-control" %>
              <%= f.error_messages %>
            </div>
          <% end %>
          <%= f.form_group :last_name, class: "row" do |f| %>
            <%= f.label "Nom", class: "col-sm-4 col-form-label" %>
            <div class="col-md-8">
              <%= f.text_field :last_name, autofocus: true, class: "form-control" %>
              <%= f.error_messages %>
            </div>
          <% end %>
          <%= f.form_group :description, class: "row" do |f| %>
            <%= f.label "Description", class: "col-sm-4 col-form-label" %>
            <div class="col-md-8">
              <%= f.text_area :description, autofocus: true, class: "form-control" %>
              <%= f.error_messages %>
            </div>
          <% end %>
          <%= f.form_group :email, class: "row" do |f| %>
            <%= f.label :email, class: "col-sm-4 col-form-label" %>
            <div class="col-md-8">
              <%= f.email_field :email, required: true, autofocus: true, class: "form-control" %>
              <%= f.error_messages %>
            </div>
          <% end %>
          <%= f.form_group :password, class: "row" do |f| %>
            <%= f.label "Mot de passe", class: "col-sm-4 col-form-label" %>
            <div class="col-md-8">
              <%= f.password_field :password, class: "form-control" %>
              <%= f.error_messages %>
              <div class="help-block">
                Leave it blank if you don"t want to change it.
              </div>
            </div>
          <% end %>
          <%= f.form_group :password_confirmation, class: "row" do |f| %>
            <%= f.label "Confirmation de mot de passe", class: "col-sm-4 col-form-label" %>
            <div class="col-md-8">
              <%= f.password_field :password_confirmation, class: "form-control" %>
              <%= f.error_messages %>
            </div>
          <% end %>
          <%= f.form_group :current_password, class: "row" do |f| %>
            <%= f.label "Mot de passe actuel", class: "col-sm-4 col-form-label" %>
            <div class="col-md-8">
              <%= f.password_field :current_password, class: "form-control" %>
              <%= f.error_messages %>
              <div class="help-block">
                We need your current password to confirm your changes.
              </div>
            </div>
          <% end %>
          <div class="row d-flex align-items-center mt-5">
            <%= link_to "Supprimer mon compte", registration_path(resource_name), confirm: "Are you sure?", method: :delete, class: "mr-auto text-danger" %>
            <div>
              <%= link_to "Retour", :back, class: "btn btn-outline-default" %>
              <%= f.submit "Mettre à jour", class: "btn btn-primary" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
